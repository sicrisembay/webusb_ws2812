(this["webpackJsonpwebusb-react-app"]=this["webpackJsonpwebusb-react-app"]||[]).push([[0],{203:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var o=n(6),c=n(0),r=n.n(c),i=n(19),l=n.n(i),a=(n(94),n(18)),s=n(81),d=n(15),u=n(33),f=n(32),h=n(208),b=n(209),v=function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(e){var o;Object(a.a)(this,n);(o=t.call(this,51966,2,3,3)).ledCount=0,o.frameSeq=0,o.ledColor=[],o.updateColor=function(e,t,n,c){if(e>=o.ledCount&&(e=o.ledCount-1),e<0&&(e=0),!(e<o.ledCount))throw Error("Invalid LED id: "+e);o.ledColor[e].r=t,o.ledColor[e].g=n,o.ledColor[e].b=c},o.clear=function(){for(var e=0;e<o.ledCount;e++)o.ledColor[e].r=0,o.ledColor[e].g=0,o.ledColor[e].b=0},o.flush=function(){var e=function(e,t,n,o){var c=new Uint8Array(6);return c[0]=16,c[1]=e%256,c[2]=(e>>8)%256,c[3]=t%256,c[4]=n%256,c[5]=o%256,c},t=function(e){var t=e.length+10,n=new Uint8Array(t);n[0]=255,n[1]=t%256,n[2]=(t>>8)%256,n[3]=(t>>16)%256,n[4]=(t>>24)%256,n[5]=o.frameSeq%256,n[6]=(o.frameSeq>>8)%256,n[7]=(o.frameSeq>>16)%256,n[8]=(o.frameSeq>>24)%256,o.frameSeq=o.frameSeq+1;for(var c=0;c<e.length;c++)n[9+c]=e[c]%256;for(var r=0,i=0;i<t-1;i++)r+=n[i];return n[t-1]=(0-r)%256,n};if(o.connected){for(var n=[],c=0;c<o.ledCount;c++){var r=t(e(o.ledColor[c].id,o.ledColor[c].r,o.ledColor[c].g,o.ledColor[c].b)),i=new Uint8Array(n.length+r.length);i.set(n),i.set(r,n.length),n=i}o.send(n)}},o.ledCount=e,o.frameSeq=0;for(var c=0;c<o.ledCount;c++)o.ledColor[c]={},o.ledColor[c].id=c,o.ledColor[c].r=0,o.ledColor[c].g=0,o.ledColor[c].b=0;return console.log(Object(d.a)(o)),o}return n}((function e(t,n,o,c){var r=this;Object(a.a)(this,e),this.Port=function(e){return r.device=e,r},this.requestPort=function(){var e=[{vendorId:r.vid}];return navigator.usb.requestDevice({filters:e}).then((function(e){r.Port(e)})).catch((function(e){console.log(e)}))},this.getPorts=function(){return navigator.usb.getDevices().then((function(e){return e.map((function(e){return r.Port(e)}))})).catch((function(e){console.log(e)}))},this.connect=function(){var e=function e(){r.device.transferIn(r.endPtIn,64).then((function(t){console.log(t.data),e()})).catch((function(e){console.log(e)}))};return r.device.open().then((function(){if(null===r.device.configuration)return r.device.selectConfiguration(1)})).then((function(){r.device.configuration.interfaces.forEach((function(e){e.alternates.forEach((function(t){255===t.interfaceClass&&(r.intf=e.interfaceNumber,t.endpoints.forEach((function(e){"out"===e.direction&&(r.endPtOut=e.endpointNumber),"in"===e.direction&&(r.endPtIn=e.endpointNumber)})))}))}))})).then((function(){return r.device.claimInterface(r.intf)})).then((function(){return r.device.selectAlternateInterface(r.intf,0)})).then((function(){r.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:r.intf}),r.connected=!0})).then((function(){e()})).catch((function(e){r.connected=!1,console.log(e)}))},this.disconnect=function(){return r.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:r.intf}).then((function(){r.connected=!1,r.device.close()}))},this.send=function(e){return r.device.transferOut(r.endPtOut,e)},this.vid=t,this.intf=n,this.endPtIn=o,this.endPtOut=c,this.connected=!1})),p=n(88),g=n(2),C=n.n(g),j=n.p+"static/media/logo.6ce24c58.svg",O=(n(203),function(e){Object(u.a)(n,e);var t=Object(f.a)(n);function n(){var e;return Object(a.a)(this,n),(e=t.call(this)).state={displayColorPicker:!1,color:{r:"241",g:"112",b:"19",a:"1"}},e.connectButtonClick=function(){e.webDevice.connected?e.webDevice.disconnect().then((function(){console.log(Object(d.a)(e))})).then((function(){e.webDevice.connected?(console.log("Connected."),e.setState({connected:!0})):(console.log("Disconnected."),e.setState({connected:!1}))})).catch((function(e){console.log(e)})):e.webDevice.requestPort().then((function(){e.webDevice.connect().then((function(){console.log(Object(d.a)(e))})).then((function(){e.webDevice.connected?(console.log("Connected."),e.setState({connected:!0})):(console.log("Disconnected."),e.setState({connected:!1}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))},e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(t){console.log(t),e.setState({color:t.rgb});for(var n=0;n<e.webDevice.ledCount;n++)e.webDevice.updateColor(n,parseInt(t.rgb.r,10),parseInt(t.rgb.g,10),parseInt(t.rgb.b,10));e.webDevice.flush()},e.webDevice=new v(24),e}return Object(s.a)(n,[{key:"render",value:function(){var e=C()({default:{color:{width:"36px",height:"14px",borderRadius:"2px",background:"rgba(".concat(this.state.color.r,", ").concat(this.state.color.g,", ").concat(this.state.color.b,", ").concat(this.state.color.a,")")},swatch:{padding:"5px",background:"#fff",borderRadius:"1px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},popover:{position:"absolute",zIndex:"2"},cover:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}}});return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)("header",{className:"App-header",children:[Object(o.jsxs)(h.a,{children:[Object(o.jsx)(b.a,{onClick:this.connectButtonClick,children:this.webDevice.connected?"Disconnect":"Connect"}),Object(o.jsx)("div",{style:e.swatch,onClick:this.handleClick,children:Object(o.jsx)("div",{style:e.color})}),this.state.displayColorPicker?Object(o.jsxs)("div",{style:e.popover,children:[Object(o.jsx)("div",{style:e.cover,onClick:this.handleClose}),Object(o.jsx)(p.a,{color:this.state.color,onChange:this.handleChange})]}):null]}),Object(o.jsx)("img",{src:j,className:"App-logo",alt:"logo"}),Object(o.jsxs)("p",{children:["Edit ",Object(o.jsx)("code",{children:"src/App.js"})," and save to reload."]}),Object(o.jsx)("a",{className:"App-link",href:"https://reactjs.org",target:"_blank",rel:"noopener noreferrer",children:"Learn React"})]})})}}]),n}(r.a.Component)),x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,210)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),o(e),c(e),r(e),i(e)}))};l.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(O,{})}),document.getElementById("root")),x()},94:function(e,t,n){}},[[204,1,2]]]);
//# sourceMappingURL=main.9367d7c8.chunk.js.map